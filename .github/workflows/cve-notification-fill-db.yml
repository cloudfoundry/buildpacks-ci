name: Fill DB with CVEs

"on":
  workflow_dispatch: { }

env:
  DB_URI: ${{ secrets.DB_URI }}
  NVD_NIST_API_KEY: ${{ secrets.NVD_NIST_API_KEY }}

jobs:
  fill-db:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Setup Go
        uses: actions/setup-go@v3
        with:
          go-version: '1.20'

      - name: Fill database
        id: fill-db
        uses: cloudfoundry/buildpacks-ci/cve-notification-app/actions/fill-db@master
        with:
          db-uri: ${{ env.DB_URI }}
          nvd-nist-api-key: ${{ env.NVD_NIST_API_KEY }}