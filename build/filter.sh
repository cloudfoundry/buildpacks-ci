#! /usr/bin/env bash

export CREDENTIAL_FILTER_WHITELIST="APPLICATION_NAME,\
ALLOWED_VERSION,\
APPS_DOMAIN,\
BASH_ENV,\
BLOB_GLOB,\
BLOB_NAME,\
BOSH_RELEASES_DIR,\
BOSH_TARGET,\
BOSH_USER,\
BOSH_USE_BUNDLER,\
BRANCH,\
BUILDPACK,\
BUILDPACK_BRANCH,\
BUILDPACK_DEPENDENCIES_HOST_DOMAIN,\
BUILDPACK_NAME,\
BUILDPACK_URL,\
BUNDLER_VERSION,\
BUNDLE_APP_CONFIG,\
BUNDLE_BIN,\
BUNDLE_BIN_PATH,\
BUNDLE_PATH,\
BUNDLE_SILENCE_ROOT_WARNING,\
CF_API,\
CF_DOMAIN,\
CF_LOGIN_SPACE,\
CF_ORGANIZATION,\
CF_RELEASE_DIR,\
CF_STACK,\
CF_USERNAME,\
CI_CF_USERNAME,\
CI_USERNAME,\
COMPAT_ONLY,\
CREDENTIAL_FILTER_WHITELIST,\
DEPENDENCY,\
DEPLOYMENT_NAME,\
DIEGO_DOCKER_ON,\
ENV_NAME,\
GCP_BOSH_DIRECTOR_USER,\
GEMFILE_NAME,\
GEM_GIT_REPOSITORY,\
GEM_HOME,\
GEM_NAME,\
GINKGO_ATTEMPTS,\
GINKGO_NODES,\
GITHUB_URL,\
GIT_REPO_ORG,\
GOMAXPROCS,\
GOPATH,\
GOROOT,\
HOME,\
IAAS,\
INSTANCE_COUNT,\
LANG,\
LANGUAGE,\
MAKELEVEL,\
OLDPWD,\
PACKAGE_DIR,\
PATH,\
PIVNET_ADDRESS,\
PIVNET_PRODUCT_NAME,\
PWD,\
RELEASE_DIR,\
RELEASE_NAME,\
REPO,\
REQUEST_PATH,\
RESOURCE_NAME,\
RESOURCE_TYPE,\
ROOTFS_RELEASE,\
RUBYGEMS_VERSION,\
RUBYGEM_MIRROR,\
RUBYLIB,\
RUBY_DOWNLOAD_SHA256,\
RUBY_MAJOR,\
RUBY_VERSION,\
RUN_IMAGE,\
SHLVL,\
SPEC_TO_RUN,\
SSH_AGENT_PID,\
STACK,\
STACKS,\
TAG,\
TERM,\
TMPDIR,\
USE_SQL,\
VERSIONS_TO_KEEP,\
USER"

if [ ! -z "${TEST_CREDENTIAL_FILTER_WHITELIST:-}" ]; then
  export CREDENTIAL_FILTER_WHITELIST="$CREDENTIAL_FILTER_WHITELIST,$TEST_CREDENTIAL_FILTER_WHITELIST"
fi

exec > >(concourse-filter) 2> >(concourse-filter -stderr)
