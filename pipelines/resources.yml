resources:
- name: depwatcher
  type: git
  source:
    uri: git@github.com:cloudfoundry/buildpacks-ci.git
    private_key: ((cf-buildpacks-eng-github-ssh-key.private_key))
    branch: master
    paths: [ dockerfiles/depwatcher/ ]

- name: depwatcher-image
  type: docker-image
  source:
    repository: coredeps/depwatcher
    username: ((coredeps-dockerhub-user.username))
    password: ((coredeps-dockerhub-user.password))

jobs:
- name: build-and-push-depwatcher
  plan:
  - in_parallel:
    - get: depwatcher
      trigger: true
  - put: depwatcher-image
    params:
      build: depwatcher/dockerfiles/depwatcher

